---
phase: 06.2-restyle-app-pencil-design
plan: 05
type: execute
wave: 3
depends_on: ["06.2-02", "06.2-03", "06.2-04"]
files_modified:
  - apps/web/src/components/file-browser/FileListItem.tsx
  - apps/web/src/components/file-browser/FolderTreeNode.tsx
  - apps/web/src/components/file-browser/FileList.tsx
  - apps/web/src/components/file-browser/FileBrowser.tsx
  - apps/web/src/components/auth/AuthButton.tsx
  - apps/web/src/routes/Dashboard.tsx
autonomous: true

must_haves:
  truths:
    - "Files show [FILE] prefix instead of emoji icon"
    - "Folders show [DIR] prefix instead of emoji icon"
    - "File list items have row-top (icon+name) and row-bottom (date+size) structure"
    - "Mobile layout shows 2-row stacked items per Pencil design"
    - "File list header shows NAME, SIZE, TYPE, MODIFIED columns"
    - "Toolbar buttons show --upload, --new-dir, --refresh text"
    - "Login button shows [CONNECT] text"
    - "Dashboard header shows > CIPHERBOX branding"
  artifacts:
    - path: "apps/web/src/components/file-browser/FileListItem.tsx"
      provides: "File/folder items with text prefixes and 2-row mobile structure"
      contains: "file-list-item-row-top"
    - path: "apps/web/src/components/auth/AuthButton.tsx"
      provides: "Terminal-styled connect button"
      contains: "[CONNECT]"
  key_links:
    - from: "apps/web/src/components/file-browser/FileListItem.tsx"
      to: "apps/web/src/styles/file-browser.css"
      via: "CSS class names"
      pattern: "file-list-item"
---

<objective>
Update React components to match terminal aesthetic - text prefixes, button labels, and header branding.

Purpose: The CSS changes in previous plans styled the elements, but the actual content (icons, button text, headers) needs to match the Pencil design. This plan updates TSX files to use [DIR]/[FILE] prefixes and terminal-style button text.

Output: Complete terminal aesthetic with correct text content throughout the UI.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/06.2-restyle-app-with-pencil-design/06.2-CONTEXT.md
@.planning/phases/06.2-restyle-app-with-pencil-design/06.2-RESEARCH.md
@.planning/phases/06.2-restyle-app-with-pencil-design/06.2-02-SUMMARY.md
@.planning/phases/06.2-restyle-app-with-pencil-design/06.2-03-SUMMARY.md
@.planning/phases/06.2-restyle-app-with-pencil-design/06.2-04-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update FileListItem and FolderTreeNode with text prefixes and 2-row mobile layout</name>
  <files>apps/web/src/components/file-browser/FileListItem.tsx, apps/web/src/components/file-browser/FolderTreeNode.tsx</files>
  <action>
First, read the current FileListItem.tsx to understand its structure, then restructure for 2-row mobile layout.

**IMPORTANT:** The mobile layout uses a 2-row stacked design per Pencil design (node ZVAUX):
- Row 1: [DIR]/[FILE] icon + filename
- Row 2: Modified date (left) | Size (right)

Restructure FileListItem.tsx with wrapper divs for mobile CSS targeting:

```tsx
function getFileExtension(filename: string): string {
  const ext = filename.split('.').pop();
  return ext && ext !== filename ? ext.toLowerCase() : '-';
}

// In the component render:
<div className="file-list-item" onClick={...} onContextMenu={...}>
  {/* Row 1: Icon + Name (for mobile top row) */}
  <div className="file-list-item-row-top">
    <span className="file-list-item-icon">
      {entry.type === 'folder' ? '[DIR]' : '[FILE]'}
    </span>
    <span className="file-list-item-name">{entry.name}</span>
  </div>

  {/* Row 2: Date + Size (for mobile bottom row) */}
  <div className="file-list-item-row-bottom">
    <span className="file-list-item-date">{formatDate(entry.modified)}</span>
    <span className="file-list-item-size">{formatSize(entry.size)}</span>
  </div>

  {/* TYPE column - hidden on mobile via CSS */}
  <span className="file-list-item-type">
    {entry.type === 'folder' ? 'dir' : getFileExtension(entry.name)}
  </span>
</div>
```

On desktop, CSS grid will position these correctly. On mobile, the row wrappers enable the 2-row stacked layout.

Similarly, in FolderTreeNode.tsx, update the folder icon:
```tsx
<span className="folder-tree-icon">[DIR]</span>
```

Remove any emoji icons and replace with text prefixes.
  </action>
  <verify>Check FileListItem.tsx contains `[DIR]`, `[FILE]`, `file-list-item-row-top`, and `file-list-item-row-bottom` classes</verify>
  <done>File and folder items display text prefixes with 2-row mobile layout structure</done>
</task>

<task type="auto">
  <name>Task 2: Update FileList header and FileBrowser toolbar</name>
  <files>apps/web/src/components/file-browser/FileList.tsx, apps/web/src/components/file-browser/FileBrowser.tsx</files>
  <action>
In FileList.tsx, update the header to show 4 columns with proper labels:

Find the file list header and ensure it has these columns:
```tsx
<div className="file-list-header">
  <span className="file-list-header-name">NAME</span>
  <span className="file-list-header-size">SIZE</span>
  <span className="file-list-header-type">TYPE</span>
  <span className="file-list-header-date">MODIFIED</span>
</div>
```

In FileBrowser.tsx, update the toolbar buttons to use terminal-style labels:

Find the toolbar buttons and update their text:
- Upload button: `--upload` (primary style)
- New folder button: `--new-dir` (secondary style)
- Refresh button: `--refresh` (secondary style)

Example structure:
```tsx
<div className="file-browser-toolbar">
  <button className="toolbar-button--primary" onClick={handleUpload}>
    --upload
  </button>
  <button className="toolbar-button--secondary" onClick={handleNewFolder}>
    --new-dir
  </button>
  <button className="toolbar-button--secondary" onClick={handleRefresh}>
    --refresh
  </button>
  {/* breadcrumbs */}
</div>
```

Make sure to apply the correct CSS classes:
- `toolbar-button--primary` for upload (green filled)
- `toolbar-button--secondary` for new-dir and refresh (green outlined)
  </action>
  <verify>Check FileList.tsx contains header columns NAME, SIZE, TYPE, MODIFIED. Check FileBrowser.tsx contains button text `--upload`, `--new-dir`, `--refresh`</verify>
  <done>File list header shows 4 columns, toolbar buttons have terminal-style labels</done>
</task>

<task type="auto">
  <name>Task 3: Update AuthButton and Dashboard header</name>
  <files>apps/web/src/components/auth/AuthButton.tsx, apps/web/src/routes/Dashboard.tsx</files>
  <action>
In AuthButton.tsx, update the button text to terminal style:

Find the button element and update its text to `[CONNECT]`:
```tsx
<button className="login-button" onClick={handleLogin} disabled={isLoading}>
  {isLoading ? 'connecting...' : '[CONNECT]'}
</button>
```

Use lowercase text for loading state to match terminal aesthetic.

In Dashboard.tsx, update the header to show terminal branding:

Find the dashboard header and update it to show `> CIPHERBOX`:
```tsx
<header className="dashboard-header">
  <h1 className="app-title">&gt; CIPHERBOX</h1>
  {/* ... user info, logout link */}
</header>
```

Or if using a span/div:
```tsx
<span className="app-title">&gt; CIPHERBOX</span>
```

Note: Use `&gt;` for the `>` character in JSX, or wrap in curly braces: `{'> CIPHERBOX'}`

Also ensure the logout link uses lowercase:
```tsx
<a href="#" className="logout-link" onClick={handleLogout}>
  logout
</a>
```

If there's user info displayed, use lowercase format:
```tsx
<span className="user-email">{user?.email?.toLowerCase()}</span>
```
  </action>
  <verify>Check AuthButton.tsx contains `[CONNECT]`, check Dashboard.tsx contains `> CIPHERBOX` or `&gt; CIPHERBOX`</verify>
  <done>Login button shows [CONNECT], dashboard header shows > CIPHERBOX branding</done>
</task>

</tasks>

<verification>
1. Login page:
   - Button shows `[CONNECT]` text
   - Loading state shows `connecting...`
2. Dashboard header:
   - Shows `> CIPHERBOX` branding
   - Logout link is lowercase
3. File browser:
   - Toolbar has `--upload`, `--new-dir`, `--refresh` buttons
   - File list header shows NAME, SIZE, TYPE, MODIFIED
   - Files show `[FILE]` prefix
   - Folders show `[DIR]` prefix
4. Folder tree:
   - Folders show `[DIR]` prefix
5. Run E2E tests: `pnpm --filter e2e test` - all should pass
</verification>

<success_criteria>
- All emoji icons replaced with text prefixes ([DIR], [FILE])
- Toolbar buttons use terminal-style text (--upload, --new-dir, --refresh)
- Login button shows [CONNECT]
- Dashboard header shows > CIPHERBOX
- Text content is lowercase where appropriate
- Existing E2E tests pass (may need selector updates if tests use emoji)
</success_criteria>

<output>
After completion, create `.planning/phases/06.2-restyle-app-with-pencil-design/06.2-05-SUMMARY.md`
</output>
