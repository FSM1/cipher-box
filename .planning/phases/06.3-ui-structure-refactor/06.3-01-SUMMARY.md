---
phase: 06.3-ui-structure-refactor
plan: 01
subsystem: ui
tags: [react, css-grid, layout, components, terminal-aesthetic]

# Dependency graph
requires:
  - phase: 06.1-webapp-automation
    provides: E2E testing framework, authenticated UI patterns
provides:
  - CSS Grid app shell layout (header/sidebar/main/footer)
  - 8 layout components: AppShell, AppHeader, AppSidebar, AppFooter, UserMenu, NavItem, StorageQuota, StatusIndicator
  - Hover-triggered user menu with logout
  - Sidebar navigation with active states
  - Storage quota progress bar
  - Connection status indicator
affects: [06.3-02, 06.3-03, 06-file-browser-ui]

# Tech tracking
tech-stack:
  added: []
  patterns:
    - CSS Grid with grid-template-areas for fixed app shell
    - Hover-triggered dropdown (not click)
    - Terminal-style bracket labels [settings] [logout] [CONNECTED]

key-files:
  created:
    - apps/web/src/styles/layout.css
    - apps/web/src/components/layout/AppShell.tsx
    - apps/web/src/components/layout/AppHeader.tsx
    - apps/web/src/components/layout/AppSidebar.tsx
    - apps/web/src/components/layout/AppFooter.tsx
    - apps/web/src/components/layout/UserMenu.tsx
    - apps/web/src/components/layout/NavItem.tsx
    - apps/web/src/components/layout/StorageQuota.tsx
    - apps/web/src/components/layout/StatusIndicator.tsx
    - apps/web/src/components/layout/index.ts
  modified: []

key-decisions:
  - 'CSS Grid layout with 180px sidebar, scrollable main area only'
  - 'Hover-triggered UserMenu dropdown per CONTEXT.md decision'
  - 'Terminal-style ASCII icons [DIR] and [CFG] for nav items'
  - 'Mobile breakpoint at 768px hides sidebar'

patterns-established:
  - 'Layout components in components/layout/ directory'
  - 'data-testid on all layout components for E2E testing'
  - 'formatBytes utility in StorageQuota for byte display'

# Metrics
duration: 3min
completed: 2026-01-30
---

# Phase 6.3 Plan 01: AppShell Layout Components Summary

CSS Grid app shell with fixed header/sidebar/footer and 8 new layout components using terminal aesthetic.

## Performance

- **Duration:** 3 min
- **Started:** 2026-01-30T02:15:36Z
- **Completed:** 2026-01-30T02:18:58Z
- **Tasks:** 3
- **Files created:** 10

## Accomplishments

- Created CSS Grid layout system with header/sidebar/main/footer areas
- Built 8 layout components with proper composition and exports
- Implemented hover-triggered UserMenu with settings and logout
- Added StatusIndicator with health check hook and glowing dot
- Created StorageQuota with progress bar using quota store

## Task Commits

Each task was committed atomically:

1. **Task 1: Create Layout CSS and AppShell Component** - `52f7876` (feat)
2. **Task 2: Create Header and Footer Components** - `39a7419` (feat)
3. **Task 3: Create Sidebar Components** - `1379a07` (feat)

## Files Created/Modified

- `apps/web/src/styles/layout.css` - CSS Grid layout system with design tokens
- `apps/web/src/components/layout/AppShell.tsx` - Main layout wrapper component
- `apps/web/src/components/layout/AppHeader.tsx` - Header with logo and UserMenu
- `apps/web/src/components/layout/AppSidebar.tsx` - Navigation sidebar with quota
- `apps/web/src/components/layout/AppFooter.tsx` - Footer with copyright, links, status
- `apps/web/src/components/layout/UserMenu.tsx` - Hover-triggered dropdown menu
- `apps/web/src/components/layout/NavItem.tsx` - Sidebar navigation item
- `apps/web/src/components/layout/StorageQuota.tsx` - Storage usage progress bar
- `apps/web/src/components/layout/StatusIndicator.tsx` - API connection status
- `apps/web/src/components/layout/index.ts` - Barrel file exporting all components

## Decisions Made

- **CSS Grid with named areas:** Used grid-template-areas for clear layout structure per RESEARCH.md recommendation
- **180px fixed sidebar:** Per design specs from Pencil design file
- **Hover dropdown:** UserMenu uses onMouseEnter/onMouseLeave per CONTEXT.md decision (not click)
- **Terminal ASCII icons:** [DIR] and [CFG] for folder and settings nav items
- **Mobile breakpoint 768px:** Sidebar hidden on mobile, single column layout
- **--color-nav-active:** Added new CSS variable #001a11 for active nav item background

## Deviations from Plan

None - plan executed exactly as written.

## Issues Encountered

None - all components built successfully on first attempt.

## User Setup Required

None - no external service configuration required.

## Next Phase Readiness

- Layout components ready to be integrated into authenticated routes
- Plan 02 will wire AppShell to routes and update Dashboard/FileBrowser
- Components have data-testid attributes ready for E2E testing

---

_Phase: 06.3-ui-structure-refactor_
_Completed: 2026-01-30_
