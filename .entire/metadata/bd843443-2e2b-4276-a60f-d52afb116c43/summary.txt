Pushed. Here's what I addressed across 10 files:

| # | Fix | File(s) |
|---|-----|---------|
| 1 | `@ArrayMinSize(1)` on batch DTO | `publish.dto.ts` |
| 2 | DB migration for `record_type` column | new migration file |
| 3 | `indexOf` → indexed loop (O(n) vs O(n²)) | `ipns.service.ts` |
| 4 | `INVALID_INPUT` error code for fileId validation | `types.ts`, `derive-ipns.ts` |
| 5 | Wrap `JSON.parse` in `CryptoError` | `metadata.ts` |
| 6 | Safe `uint8ToBase64` helper (avoids stack overflow) | `file-metadata.service.ts`, `folder.service.ts` |
| 7 | `mimeType` in effect deps | `useFilePreview.ts` |
| 8 | Throw on null IPNS in update path | `file-metadata.service.ts` |
| 9 | Check batch publish result, throw on partial failure | `folder.service.ts` (3 call sites) |
| 10 | Remove misleading "supports v1" docstring | `folder.service.ts` |

The FileBrowser.tsx v2 cast comment (#5 in original list) was addressed indirectly — the `loadFolder` function that feeds it now returns `(metadata.children ?? [])` with a corrected docstring. The cast is intentional since v1 data can't exist at runtime (requires DB wipe to migrate to v2).